<td-layout-nav logo="" toolbarTitle="ECAT - Profile">
  <div td-toolbar-content fxLayout="row" fxLayoutAlign="center center" fxFlex>
    <span fxFlex></span>
    <a md-icon-button mdTooltip="Profile" routerLink="/profile">
      <md-icon>account_circle</md-icon>
    </a>
  </div>
  <div class="width">
    <md-card>
      <md-tab-group md-stretch-tabs>
        <md-tab>
          <ng-template md-tab-label>About Me</ng-template>
          <div *tdLoading="'profileLoading'">
            <md-list>
              <h3 md-subheader>Basic Information</h3>
              <md-list-item>
                <md-icon md-list-avatar>account_box</md-icon>
                <h4 md-line>{{prettyName}}</h4>
                <p md-line>Name</p>
              </md-list-item>
              <md-divider md-inset></md-divider>
              <md-list-item>
                <md-icon md-list-avatar>description</md-icon>
                <h4 md-line>{{user?.email}}</h4>
                <p md-line>Email</p>
              </md-list-item>
              <md-divider></md-divider>
              <h3 md-subheader>Additional Information</h3>
              <div *ngIf="!isEditing">
                <md-list-item>
                  <md-icon md-list-avatar>description</md-icon>
                  <h4 md-line>{{user?.mpGender}}</h4>
                  <p md-line>Gender</p>
                </md-list-item>
                <md-divider md-inset></md-divider>
                <md-list-item>
                  <md-icon md-list-avatar>description</md-icon>
                  <h4 md-line>{{user?.mpAffiliation}}</h4>
                  <p md-line>Affiliation</p>
                </md-list-item>
                <md-divider md-inset></md-divider>
                <md-list-item>
                  <md-icon md-list-avatar>description</md-icon>
                  <h4 md-line>{{user?.mpComponent}}</h4>
                  <p md-line>Military Component</p>
                </md-list-item>
                <md-divider md-inset></md-divider>
                <md-list-item>
                  <md-icon md-list-avatar>description</md-icon>
                  <h4 md-line>{{user?.mpPaygrade}}</h4>
                  <p md-line>Pay Grade</p>
                </md-list-item>
              </div>
              <div *ngIf="isEditing">
                <form #profileForm="ngForm">
                  <div layout-gt-xs="row" layout-margin>
                    <md-select flex="50" #genderForm="ngModel" pattern="^((?!Unknown).)*$" placeholder="Gender" [(ngModel)]="user && user.mpGender"
                      name="gender" required>
                      <md-option [value]="gender.female">Female</md-option>
                      <md-option [value]="gender.male">Male</md-option>
                      <md-option [value]="gender.other">Other</md-option>
                      <md-option [value]="gender.unk">[Select Your Gender]</md-option>
                    </md-select>
                    <md-hint>
                      <span class="tc-red-600">
                      <span [hidden]="!genderForm.errors?.required">Required</span>
                      <span [hidden]="!genderForm.errors?.pattern">Required</span>
                      </span>
                    </md-hint>
                  </div>
                  <div layout-gt-xs="row" layout-margin>
                    <md-select flex="50" #affiliationForm="ngModel" pattern="^((?!Unknown).)*$" placeholder="Affiliation" [(ngModel)]="user && user.mpAffiliation"
                      (ngModelChange)="updatePayGradeList()" invalidAffiliation="Unknown" name="affiliation" required>
                      <md-option *ngFor="let affiliation of affiliationList | filterUnknownPipe" [value]="affiliation.value">
                        {{affiliation.value}}
                      </md-option>
                      <md-option value="Unknown">[Select Your Military Affiliation]</md-option>
                    </md-select>
                    <md-hint>
                      <span class="tc-red-600">
                      <span [hidden]="!affiliationForm.errors?.required">Required</span>
                      <span [hidden]="!affiliationForm.errors?.pattern">Required</span>
                      </span>
                    </md-hint>
                  </div>
                  <div layout-gt-xs="row" layout-margin>
                    <md-select flex="50" #componentForm="ngModel" placeholder="Military Component" [(ngModel)]="user && user.mpComponent" pattern="^((?!Unknown).)*$"
                      name="militaryComponent" required>
                      <md-option *ngFor="let component of componentList | filterUnknownPipe" [value]="component.value">
                        {{component.value}}
                      </md-option>
                      <md-option value="Unknown">[Select Your Military Component]</md-option>
                    </md-select>
                    <md-hint>
                      <span class="tc-red-600">
                      <span [hidden]="!componentForm.errors?.required">Required</span>
                      <span [hidden]="!componentForm.errors?.pattern">Required</span>
                      </span>
                    </md-hint>
                  </div>
                  <div layout-gt-xs="row" layout-margin>
                    <md-select flex="50" #paygradeForm="ngModel" placeholder="Paygrade" [(ngModel)]="user && user.mpPaygrade" pattern="^((?!Unknown).)*$"
                      name="paygrade" required>
                      <md-option *ngFor="let grade of payGradeList | filterUnknownPipe" [value]="grade.prop">
                        {{grade.value}}
                      </md-option>
                      <md-option value="Unknown">[Select Your Paygrade]</md-option>
                    </md-select>
                    <md-hint>
                      <span class="tc-red-600">
                      <span [hidden]="!paygradeForm.errors?.required">Required</span>
                      <span [hidden]="!paygradeForm.errors?.pattern">Required</span>
                      </span>
                    </md-hint>
                  </div>
                  <md-divider></md-divider>
                  <div class="pad-top-sm pad-bottom-sm" fxLayout="row">


                    <div fxFlex></div>
                    <button md-raised-button color="primary" type="button" class="text-upper" (click)="cancelSave();">Cancel</button>
                    <span class="pad-right-xs"></span>
                    <button md-raised-button color="primary" type="button" [disabled]="profileForm.pristine || !profileForm.valid" (click)="saveProfile()"
                      class="text-upper">Save</button>
                    <span class="pad-right-xs"></span>

                  </div>
                </form>
              </div>
            </md-list>
            <div *ngIf="!isEditing">
              <md-divider></md-divider>
              <md-card-actions>
                <div fxFlex></div>
                <button md-raised-button color="primary" (click)="editProfile()" type="button" md-button color="primary" class="text-upper">Edit</button>
              </md-card-actions>
            </div>
          </div>
        </md-tab>
        <md-tab *ngIf="userRoles?.isStudent">
          <ng-template md-tab-label>Student</ng-template>
          <div *ngIf="user">
            <ecat-profile-student [profile]="user.student"></ecat-profile-student>
          </div>
        </md-tab>
        <md-tab *ngIf="userRoles?.isFaculty">
          <ng-template md-tab-label>Faculty</ng-template>
          <div *ngIf="user">
            <ecat-profile-faculty [profile]="user.faculty"></ecat-profile-faculty>
          </div>
        </md-tab>
      </md-tab-group>
    </md-card>
  </div>
</td-layout-nav>